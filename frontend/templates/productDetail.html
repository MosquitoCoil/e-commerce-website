{% extends "base.html" %} {% block title %}{{ product.name }} | MyShop{%
endblock %} {% block content %}
<div class="container py-5">
  <div class="row">
    <!-- Product Image -->
    <div class="col-md-6 mb-4 mb-md-0">
      <img
        src="{{ url_for('static', filename='uploads/' ~ product.image) }}"
        alt="{{ product.name }}"
        class="img-fluid rounded shadow-sm"
      />
    </div>

    <!-- Product Info -->
    <div class="col-md-6">
      <h2>{{ product.name }}</h2>
      <p>{{ product.description }}</p>
      <p><strong>₱{{ "%.2f"|format(product.price) }}</strong></p>

      <!-- Size Selection -->
      <form
        method="POST"
        action="{{ url_for('addToCart.add_to_cart', product_id=product.id) }}"
      >
        <label class="form-label">Select Size:</label>
        <div class="mb-3">
          {% for v in variants %} <input type="radio" class="btn-check"
          name="size" id="size-{{ v.size }}" value="{{ v.size }}" {% if v.stock
          == 0 %}disabled{% endif %} required >
          <label class="btn btn-outline-dark m-1" for="size-{{ v.size }}">
            {{ v.size }} {% if v.stock == 0 %}(Out of Stock){% endif %}
          </label>
          {% endfor %}
        </div>

        {% set all_out_of_stock = variants|selectattr('stock', 'equalto',
        0)|list|length == variants|length %}
        <button
          type="submit"
          class="btn btn-dark btn-lg"
          {%
          if
          all_out_of_stock
          %}disabled{%
          endif
          %}
        >
          <i class="bi bi-cart-plus"></i> Add to Cart {% if all_out_of_stock %}
          (Out of Stock) {% endif %}
        </button>
      </form>

      <!-- Back to Shop -->
      <div class="mt-3">
        <a href="{{ url_for('home.home') }}" class="btn btn-outline-secondary">
          ← Back to Shop
        </a>
      </div>
    </div>
  </div>

  <hr class="my-5" />
</div>
{% endblock %}
